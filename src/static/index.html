<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>DJ Calendar PRO+ - Planning Mobile</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            background: #0f172a; 
            color: white; 
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Calendrier responsive */
        .calendar-day { 
            min-height: 80px; 
            border: 1px solid #334155;
            position: relative;
        }
        
        /* Mobile: calendrier plus compact */
        @media (max-width: 768px ) {
            .calendar-day { 
                min-height: 60px; 
                font-size: 12px;
            }
            .calendar-day-number {
                font-size: 11px;
            }
        }
        
        /* Événements avec couleurs par type */
        .event-club { background: linear-gradient(135deg, #7c3aed, #a855f7); }
        .event-festival { background: linear-gradient(135deg, #dc2626, #ef4444); }
        .event-wedding { background: linear-gradient(135deg, #ec4899, #f472b6); }
        .event-private { background: linear-gradient(135deg, #2563eb, #3b82f6); }
        .event-corporate { background: linear-gradient(135deg, #ea580c, #f97316); }
        
        .event-confirmed { opacity: 1; }
        .event-pending { opacity: 0.8; border: 2px dashed #fbbf24; }
        .event-cancelled { opacity: 0.6; filter: grayscale(50%); }
        
        .event-item { 
            cursor: pointer; 
            transition: all 0.2s;
            border-radius: 4px;
            margin: 1px;
            padding: 2px 4px;
            font-size: 9px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            font-weight: 500;
        }
        
        /* Mobile: événements plus lisibles */
        @media (max-width: 768px) {
            .event-item { 
                font-size: 10px;
                padding: 3px 5px;
                margin: 1px 0;
                border-radius: 3px;
            }
        }
        
        .event-item:hover { 
            transform: scale(1.02); 
            z-index: 10;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        
        /* Modal responsive */
        .modal-overlay { 
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(4px);
        }
        
        /* Mobile: modal plein écran */
        @media (max-width: 768px) {
            .modal-content {
                width: 100vw !important;
                height: 100vh !important;
                max-width: none !important;
                max-height: none !important;
                border-radius: 0 !important;
                margin: 0 !important;
                overflow-y: auto;
            }
        }
        
        /* Boutons tactiles optimisés */
        .btn-touch {
            min-height: 44px;
            min-width: 44px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Navigation mobile */
        @media (max-width: 768px) {
            .mobile-nav {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background: #1e293b;
                border-top: 1px solid #334155;
                z-index: 50;
                padding: 8px;
                box-shadow: 0 -4px 8px rgba(0,0,0,0.3);
            }
            
            .main-content {
                padding-bottom: 80px;
            }
        }
        
        /* Formulaire mobile optimisé */
        @media (max-width: 768px) {
            .form-input {
                font-size: 16px; /* Évite le zoom sur iOS */
                padding: 12px;
                border-radius: 8px;
            }
        }
        
        /* Swipe indicators */
        .swipe-indicator {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(124, 58, 237, 0.8);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            z-index: 10;
            color: white;
            font-weight: bold;
        }
        
        .swipe-indicator:hover {
            background: rgba(124, 58, 237, 1);
            transform: translateY(-50%) scale(1.1);
        }
        
        @media (max-width: 768px) {
            .swipe-indicator {
                width: 35px;
                height: 35px;
                font-size: 14px;
            }
        }
        
        /* Animations fluides */
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Statistiques responsive */
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            .stat-card {
                padding: 12px;
                text-align: center;
            }
            .stat-value {
                font-size: 18px;
            }
            .stat-label {
                font-size: 11px;
            }
        }
        
        /* Header mobile */
        @media (max-width: 768px) {
            .header-title {
                font-size: 20px;
            }
            .header-subtitle {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function App() {
            const [events, setEvents] = useState([]);
            const [currentDate, setCurrentDate] = useState(new Date());
            const [showModal, setShowModal] = useState(false);
            const [editingEvent, setEditingEvent] = useState(null);
            const [stats, setStats] = useState({});
            const [searchTerm, setSearchTerm] = useState('');
            const [filterType, setFilterType] = useState('');
            const [filterStatus, setFilterStatus] = useState('');
            const [isMobile, setIsMobile] = useState(false);
            const [isLoading, setIsLoading] = useState(false);

            // Détection mobile
            useEffect(() => {
                const checkMobile = () => {
                    setIsMobile(window.innerWidth <= 768);
                };
                checkMobile();
                window.addEventListener('resize', checkMobile);
                return () => window.removeEventListener('resize', checkMobile);
            }, []);

            const loadEvents = async () => {
                try {
                    setIsLoading(true);
                    const params = new URLSearchParams();
                    if (searchTerm) params.append('search', searchTerm);
                    if (filterType) params.append('type', filterType);
                    if (filterStatus) params.append('status', filterStatus);
                    
                    const response = await fetch(`/api/events?${params}`);
                    const data = await response.json();
                    if (data.success) {
                        setEvents(data.events);
                    }
                } catch (error) {
                    console.error('Erreur chargement événements:', error);
                } finally {
                    setIsLoading(false);
                }
            };

            const loadStats = async () => {
                try {
                    const response = await fetch('/api/events/stats');
                    const data = await response.json();
                    if (data.success) {
                        setStats(data.stats);
                    }
                } catch (error) {
                    console.error('Erreur chargement stats:', error);
                }
            };

            useEffect(() => {
                loadEvents();
                loadStats();
            }, [searchTerm, filterType, filterStatus]);

            const createEvent = async (eventData) => {
                try {
                    setIsLoading(true);
                    const response = await fetch('/api/events', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(eventData)
                    });
                    const data = await response.json();
                    
                    if (data.success) {
                        await loadEvents();
                        await loadStats();
                        setShowModal(false);
                        setEditingEvent(null);
                        if (isMobile) {
                            alert('✅ Événement créé !');
                        }
                    } else {
                        alert('❌ Erreur: ' + (data.error || 'Erreur inconnue'));
                    }
                } catch (error) {
                    console.error('Erreur création:', error);
                    alert('❌ Erreur lors de la création: ' + error.message);
                } finally {
                    setIsLoading(false);
                }
            };

            const updateEvent = async (eventId, eventData) => {
                try {
                    setIsLoading(true);
                    const response = await fetch(`/api/events/${eventId}`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(eventData)
                    });
                    const data = await response.json();
                    
                    if (data.success) {
                        await loadEvents();
                        await loadStats();
                        setShowModal(false);
                        setEditingEvent(null);
                        if (isMobile) {
                            alert('✅ Événement modifié !');
                        }
                    } else {
                        alert('❌ Erreur: ' + (data.error || 'Erreur inconnue'));
                    }
                } catch (error) {
                    console.error('Erreur modification:', error);
                    alert('❌ Erreur lors de la modification');
                } finally {
                    setIsLoading(false);
                }
            };

            const deleteEvent = async (eventId) => {
                const confirmDelete = isMobile ? 
                    confirm('Supprimer cet événement ?') :
                    window.confirm('Êtes-vous sûr de vouloir supprimer cet événement ?');
                    
                if (!confirmDelete) return;

                try {
                    setIsLoading(true);
                    const response = await fetch(`/api/events/${eventId}`, {
                        method: 'DELETE'
                    });
                    const data = await response.json();
                    
                    if (data.success) {
                        await loadEvents();
                        await loadStats();
                        setShowModal(false);
                        setEditingEvent(null);
                        if (isMobile) {
                            alert('✅ Événement supprimé !');
                        }
                    }
                } catch (error) {
                    console.error('Erreur suppression:', error);
                    alert('❌ Erreur lors de la suppression');
                } finally {
                    setIsLoading(false);
                }
            };

            const getEventIcon = (type) => {
                const icons = {
                    club: '🎧',
                    festival: '🎪',
                    wedding: '💒',
                    private: '🏠',
                    corporate: '🏢'
                };
                return icons[type] || '🎵';
            };

            const getEventClass = (event) => {
                const typeClass = `event-${event.type}`;
                const statusClass = `event-${event.status}`;
                return `event-item ${typeClass} ${statusClass}`;
            };

            // CORRECTION DÉFINITIVE DES DATES
            const formatDateForComparison = (date) => {
                // Utilise les composants de date locaux sans conversion
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                return `${year}-${month}-${day}`;
            };

            const createLocalDate = (year, month, day) => {
                // Crée une date locale sans risque de décalage UTC
                return new Date(year, month, day);
            };

            const getDaysInMonth = (date) => {
                const year = date.getFullYear();
                const month = date.getMonth();
                const firstDay = createLocalDate(year, month, 1);
                const lastDay = createLocalDate(year, month + 1, 0);
                const daysInMonth = lastDay.getDate();
                const startingDayOfWeek = firstDay.getDay();
                
                const days = [];
                
                // Jours du mois précédent
                for (let i = startingDayOfWeek - 1; i >= 0; i--) {
                    const prevDate = createLocalDate(year, month, -i);
                    days.push({ date: prevDate, isCurrentMonth: false });
                }
                
                // Jours du mois actuel
                for (let day = 1; day <= daysInMonth; day++) {
                    const currentDate = createLocalDate(year, month, day);
                    days.push({ date: currentDate, isCurrentMonth: true });
                }
                
                // Jours du mois suivant pour compléter la grille
                const remainingDays = 42 - days.length;
                for (let day = 1; day <= remainingDays; day++) {
                    const nextDate = createLocalDate(year, month + 1, day);
                    days.push({ date: nextDate, isCurrentMonth: false });
                }
                
                return days;
            };

            const getEventsForDate = (date) => {
                const dateStr = formatDateForComparison(date);
                return events.filter(event => event.date === dateStr);
            };

            const isToday = (date) => {
                const today = new Date();
                return formatDateForComparison(date) === formatDateForComparison(today);
            };

            const navigateMonth = (direction) => {
                const newDate = new Date(currentDate);
                newDate.setMonth(newDate.getMonth() + direction);
                setCurrentDate(newDate);
            };

            const resetFilters = () => {
                setSearchTerm('');
                setFilterType('');
                setFilterStatus('');
            };

            const days = getDaysInMonth(currentDate);
            const monthName = currentDate.toLocaleDateString('fr-FR', { month: 'long', year: 'numeric' });

            return (
                <div className={`min-h-screen bg-slate-900 p-4 ${isMobile ? 'main-content' : ''}`}>
                    {/* Header responsive */}
                    <div className="flex justify-between items-center mb-6">
                        <div>
                            <h1 className={`font-bold text-white ${isMobile ? 'header-title' : 'text-3xl'}`}>
                                🎵 DJ Calendar PRO+
                            </h1>
                            <p className={`text-slate-400 ${isMobile ? 'header-subtitle' : ''}`}>
                                Planning professionnel mobile
                            </p>
                        </div>
                        <button 
                            onClick={() => setShowModal(true)}
                            className="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg text-white font-semibold btn-touch"
                            disabled={isLoading}
                        >
                            {isMobile ? '➕' : '➕ Nouvel événement'}
                        </button>
                    </div>

                    {/* Filtres */}
                    <div className="mb-6 bg-slate-800 p-4 rounded-lg">
                        <div className={`${isMobile ? 'space-y-3' : 'flex gap-4 items-center'}`}>
                            <input 
                                type="text" 
                                placeholder="Rechercher événements..."
                                className={`bg-slate-700 rounded text-white ${isMobile ? 'w-full form-input' : 'flex-1 p-2'}`}
                                value={searchTerm} 
                                onChange={(e) => setSearchTerm(e.target.value)}
                            />
                            <select 
                                className={`bg-slate-700 rounded text-white ${isMobile ? 'w-full form-input' : 'p-2'}`}
                                value={filterType} 
                                onChange={(e) => setFilterType(e.target.value)}
                            >
                                <option value="">Tous types</option>
                                <option value="club">🎧 Club</option>
                                <option value="festival">🎪 Festival</option>
                                <option value="wedding">💒 Mariage</option>
                                <option value="private">🏠 Privé</option>
                                <option value="corporate">🏢 Corporate</option>
                            </select>
                            <select 
                                className={`bg-slate-700 rounded text-white ${isMobile ? 'w-full form-input' : 'p-2'}`}
                                value={filterStatus} 
                                onChange={(e) => setFilterStatus(e.target.value)}
                            >
                                <option value="">Tous statuts</option>
                                <option value="confirmed">✅ Confirmé</option>
                                <option value="pending">⏳ En attente</option>
                                <option value="cancelled">❌ Annulé</option>
                            </select>
                            {(searchTerm || filterType || filterStatus) && (
                                <button 
                                    onClick={resetFilters}
                                    className="bg-red-600 hover:bg-red-700 px-3 py-2 rounded text-white btn-touch"
                                >
                                    🗑️ Reset
                                </button>
                            )}
                        </div>
                    </div>

                    {/* Navigation du calendrier */}
                    <div className="bg-slate-800 rounded-lg p-4 mb-6">
                        <div className="flex items-center justify-between mb-4 relative">
                            <button 
                                onClick={() => navigateMonth(-1)}
                                className="swipe-indicator left-2 btn-touch"
                                style={{left: '8px'}}
                            >
                                ←
                            </button>
                            <h2 className="text-xl font-bold capitalize text-center flex-1">
                                {monthName}
                            </h2>
                            <button 
                                onClick={() => navigateMonth(1)}
                                className="swipe-indicator right-2 btn-touch"
                                style={{right: '8px'}}
                            >
                                →
                            </button>
                        </div>
                        
                        {/* Jours de la semaine */}
                        <div className="grid grid-cols-7 gap-1 mb-2">
                            {['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'].map(day => (
                                <div key={day} className="text-center font-semibold text-slate-400 p-2 text-sm">
                                    {isMobile ? day.charAt(0) : day}
                                </div>
                            ))}
                        </div>
                        
                        {/* Grille du calendrier */}
                        <div className="grid grid-cols-7 gap-1">
                            {days.map((day, index) => {
                                const dayEvents = getEventsForDate(day.date);
                                const todayCheck = isToday(day.date);
                                
                                return (
                                    <div 
                                        key={index} 
                                        className={`calendar-day p-1 ${
                                            day.isCurrentMonth ? 'bg-slate-700' : 'bg-slate-800 opacity-50'
                                        } ${todayCheck ? 'ring-2 ring-purple-500' : ''}`}
                                    >
                                        <div className={`calendar-day-number font-medium mb-1 ${
                                            todayCheck ? 'text-purple-400' : 'text-white'
                                        }`}>
                                            {day.date.getDate()}
                                        </div>
                                        <div className="space-y-1">
                                            {dayEvents.slice(0, isMobile ? 2 : 3).map(event => (
                                                <div
                                                    key={event.id}
                                                    className={getEventClass(event)}
                                                    onClick={() => {
                                                        setEditingEvent(event);
                                                        setShowModal(true);
                                                    }}
                                                    title={`${getEventIcon(event.type)} ${event.title} - ${event.venueName} (${event.fee}€)`}
                                                >
                                                    {isMobile ? 
                                                        `${getEventIcon(event.type)} ${event.title.substring(0, 8)}${event.title.length > 8 ? '...' : ''}` :
                                                        `${getEventIcon(event.type)} ${event.title}`
                                                    }
                                                </div>
                                            ))}
                                            {dayEvents.length > (isMobile ? 2 : 3) && (
                                                <div className="text-xs text-slate-400 text-center">
                                                    +{dayEvents.length - (isMobile ? 2 : 3)} autres
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    </div>

                    {/* Statistiques responsive */}
                    <div className={`grid gap-4 mb-6 ${isMobile ? 'stats-grid' : 'grid-cols-4'}`}>
                        <div className={`bg-slate-800 rounded-lg ${isMobile ? 'stat-card' : 'p-4'}`}>
                            <h3 className={`text-slate-400 ${isMobile ? 'stat-label' : ''}`}>Total événements</h3>
                            <p className={`font-bold text-white ${isMobile ? 'stat-value' : 'text-2xl'}`}>
                                {stats.total_events || 0}
                            </p>
                        </div>
                        <div className={`bg-slate-800 rounded-lg ${isMobile ? 'stat-card' : 'p-4'}`}>
                            <h3 className={`text-slate-400 ${isMobile ? 'stat-label' : ''}`}>Confirmés</h3>
                            <p className={`font-bold text-green-400 ${isMobile ? 'stat-value' : 'text-2xl'}`}>
                                {stats.confirmed_events || 0}
                            </p>
                        </div>
                        <div className={`bg-slate-800 rounded-lg ${isMobile ? 'stat-card' : 'p-4'}`}>
                            <h3 className={`text-slate-400 ${isMobile ? 'stat-label' : ''}`}>En attente</h3>
                            <p className={`font-bold text-yellow-400 ${isMobile ? 'stat-value' : 'text-2xl'}`}>
                                {stats.pending_events || 0}
                            </p>
                        </div>
                        <div className={`bg-slate-800 rounded-lg ${isMobile ? 'stat-card' : 'p-4'}`}>
                            <h3 className={`text-slate-400 ${isMobile ? 'stat-label' : ''}`}>Revenus</h3>
                            <p className={`font-bold text-purple-400 ${isMobile ? 'stat-value' : 'text-2xl'}`}>
                                {stats.total_revenue || 0} €
                            </p>
                        </div>
                    </div>

                    {/* Loading indicator */}
                    {isLoading && (
                        <div className="fixed top-4 right-4 bg-purple-600 text-white px-4 py-2 rounded-lg z-50">
                            ⏳ Chargement...
                        </div>
                    )}

                    {/* Modal */}
                    {showModal && (
                        <EventModal 
                            onClose={() => {
                                setShowModal(false);
                                setEditingEvent(null);
                            }} 
                            onSave={editingEvent ? 
                                (data) => updateEvent(editingEvent.id, data) : 
                                createEvent
                            }
                            onDelete={editingEvent ? () => deleteEvent(editingEvent.id) : null}
                            event={editingEvent}
                            isMobile={isMobile}
                        />
                    )}

                    {/* Navigation mobile fixe */}
                    {isMobile && (
                        <div className="mobile-nav">
                            <div className="flex justify-around">
                                <button 
                                    onClick={() => navigateMonth(-1)}
                                    className="flex flex-col items-center text-slate-400 btn-touch"
                                >
                                    <span>←</span>
                                    <span className="text-xs">Précédent</span>
                                </button>
                                <button 
                                    onClick={() => setCurrentDate(new Date())}
                                    className="flex flex-col items-center text-purple-400 btn-touch"
                                >
                                    <span>📅</span>
                                    <span className="text-xs">Aujourd'hui</span>
                                </button>
                                <button 
                                    onClick={() => setShowModal(true)}
                                    className="flex flex-col items-center text-green-400 btn-touch"
                                >
                                    <span>➕</span>
                                    <span className="text-xs">Nouveau</span>
                                </button>
                                <button 
                                    onClick={() => navigateMonth(1)}
                                    className="flex flex-col items-center text-slate-400 btn-touch"
                                >
                                    <span>→</span>
                                    <span className="text-xs">Suivant</span>
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // Composant Modal optimisé mobile
        function EventModal({ onClose, onSave, onDelete, event, isMobile }) {
            const [formData, setFormData] = useState({
                title: event?.title || '',
                date: event?.date || '',
                startTime: event?.startTime || '',
                endTime: event?.endTime || '',
                venueName: event?.venueName || '',
                venueAddress: event?.venueAddress || '',
                fee: event?.fee || '',
                currency: event?.currency || 'EUR',
                status: event?.status || 'confirmed',
                type: event?.type || 'club',
                notes: event?.notes || ''
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                if (formData.title && formData.date && formData.startTime && formData.venueName && formData.fee) {
                    onSave(formData);
                } else {
                    alert('Veuillez remplir tous les champs obligatoires');
                }
            };

            return (
                <div className="modal-overlay fixed inset-0 flex items-center justify-center z-50">
                    <div className={`bg-slate-800 rounded-lg ${isMobile ? 'modal-content' : 'w-96 max-h-96 overflow-y-auto p-6'}`}>
                        {isMobile && (
                            <div className="sticky top-0 bg-slate-800 p-4 border-b border-slate-600 flex justify-between items-center">
                                <h3 className="text-xl font-bold">
                                    {event ? 'Modifier événement' : 'Nouvel événement'}
                                </h3>
                                <button 
                                    onClick={onClose}
                                    className="text-slate-400 hover:text-white text-2xl btn-touch"
                                >
                                    ✕
                                </button>
                            </div>
                        )}
                        
                        <div className={isMobile ? 'p-4' : ''}>
                            {!isMobile && (
                                <div className="flex justify-between items-center mb-4">
                                    <h3 className="text-xl font-bold">
                                        {event ? 'Modifier événement' : 'Nouvel événement'}
                                    </h3>
                                    <button 
                                        onClick={onClose}
                                        className="text-slate-400 hover:text-white"
                                    >
                                        ✕
                                    </button>
                                </div>
                            )}
                            
                            <form onSubmit={handleSubmit} className="space-y-4">
                                <input 
                                    type="text" 
                                    placeholder="Nom de l'événement *" 
                                    required
                                    className={`w-full bg-slate-700 rounded text-white ${isMobile ? 'form-input' : 'p-2'}`}
                                    value={formData.title} 
                                    onChange={(e) => setFormData({...formData, title: e.target.value})}
                                />
                                
                                <input 
                                    type="date" 
                                    required
                                    className={`w-full bg-slate-700 rounded text-white ${isMobile ? 'form-input' : 'p-2'}`}
                                    value={formData.date} 
                                    onChange={(e) => setFormData({...formData, date: e.target.value})}
                                />
                                
                                <div className="grid grid-cols-2 gap-2">
                                    <input 
                                        type="time" 
                                        placeholder="Début *" 
                                        required
                                        className={`bg-slate-700 rounded text-white ${isMobile ? 'form-input' : 'p-2'}`}
                                        value={formData.startTime} 
                                        onChange={(e) => setFormData({...formData, startTime: e.target.value})}
                                    />
                                    <input 
                                        type="time" 
                                        placeholder="Fin"
                                        className={`bg-slate-700 rounded text-white ${isMobile ? 'form-input' : 'p-2'}`}
                                        value={formData.endTime} 
                                        onChange={(e) => setFormData({...formData, endTime: e.target.value})}
                                    />
                                </div>
                                
                                <input 
                                    type="text" 
                                    placeholder="Nom du lieu *" 
                                    required
                                    className={`w-full bg-slate-700 rounded text-white ${isMobile ? 'form-input' : 'p-2'}`}
                                    value={formData.venueName} 
                                    onChange={(e) => setFormData({...formData, venueName: e.target.value})}
                                />
                                
                                <input 
                                    type="text" 
                                    placeholder="Adresse du lieu"
                                    className={`w-full bg-slate-700 rounded text-white ${isMobile ? 'form-input' : 'p-2'}`}
                                    value={formData.venueAddress} 
                                    onChange={(e) => setFormData({...formData, venueAddress: e.target.value})}
                                />
                                
                                <input 
                                    type="number" 
                                    placeholder="Cachet *" 
                                    required
                                    className={`w-full bg-slate-700 rounded text-white ${isMobile ? 'form-input' : 'p-2'}`}
                                    value={formData.fee} 
                                    onChange={(e) => setFormData({...formData, fee: e.target.value})}
                                />
                                
                                <div className="grid grid-cols-2 gap-2">
                                    <select 
                                        className={`bg-slate-700 rounded text-white ${isMobile ? 'form-input' : 'p-2'}`}
                                        value={formData.type} 
                                        onChange={(e) => setFormData({...formData, type: e.target.value})}
                                    >
                                        <option value="club">🎧 Club</option>
                                        <option value="festival">🎪 Festival</option>
                                        <option value="wedding">💒 Mariage</option>
                                        <option value="private">🏠 Privé</option>
                                        <option value="corporate">🏢 Corporate</option>
                                    </select>
                                    
                                    <select 
                                        className={`bg-slate-700 rounded text-white ${isMobile ? 'form-input' : 'p-2'}`}
                                        value={formData.status} 
                                        onChange={(e) => setFormData({...formData, status: e.target.value})}
                                    >
                                        <option value="confirmed">✅ Confirmé</option>
                                        <option value="pending">⏳ En attente</option>
                                        <option value="cancelled">❌ Annulé</option>
                                    </select>
                                </div>
                                
                                <textarea 
                                    placeholder="Notes (optionnel)"
                                    rows={isMobile ? 3 : 2}
                                    className={`w-full bg-slate-700 rounded text-white resize-none ${isMobile ? 'form-input' : 'p-2'}`}
                                    value={formData.notes} 
                                    onChange={(e) => setFormData({...formData, notes: e.target.value})}
                                />
                                
                                <div className={`flex gap-2 ${isMobile ? 'pt-4' : ''}`}>
                                    {!isMobile && (
                                        <button 
                                            type="button" 
                                            onClick={onClose} 
                                            className="flex-1 bg-slate-600 hover:bg-slate-500 py-2 rounded btn-touch"
                                        >
                                            Annuler
                                        </button>
                                    )}
                                    
                                    {event && onDelete && (
                                        <button 
                                            type="button" 
                                            onClick={onDelete} 
                                            className="flex-1 bg-red-600 hover:bg-red-700 py-3 rounded btn-touch"
                                        >
                                            🗑️ Supprimer
                                        </button>
                                    )}
                                    
                                    <button 
                                        type="submit" 
                                        className="flex-1 bg-purple-600 hover:bg-purple-700 py-3 rounded btn-touch font-semibold"
                                    >
                                        {event ? '✅ Modifier' : '✅ Créer'}
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
